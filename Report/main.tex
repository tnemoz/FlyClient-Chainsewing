\documentclass[11pt, twoside]{report}

\newcommand{\reporttitle}{Superlight Blockchain Clients as Velvet Forks:\\ Cure or Curse?}
\newcommand{\reportauthor}{Tristan Nemoz}
\newcommand{\supervisor}{Alexei Zamyatin}
\newcommand{\degreetype}{Computing (Security \& Reliability)}

\input{includes} % Provides packages
\input{notation} % Provides shorthands

\date{September 2020}

\begin{document}
  \input{titlepage}
  
  \pagenumbering{roman}
  \clearpage{\pagestyle{empty}\cleardoublepage}
  \setcounter{page}{1}
  \pagestyle{fancy}
  
  \begin{abstract}
    In the original Bitcoin whitepaper \cite{Bitcoin}, \citeauthor{Bitcoin} expected the blockchain to become too big to be fitted within a low storage machine. Having this problem in mind, they proposed the Simplified Payment Verification, effectively enabling a client to verify a transaction while only storing the block headers, which drastically reduces the data to store. In order to further reduce the storage required by light clients, e.g. to enable deployment on wearable devices or smart contracts, a more efficient \emph{superlight} client technique was recently proposed in \FC\ \cite{\FCCite}. However, it is still to be shown how a such protocol can be deployed on an already existing chain, without contentions soft or hard forks. \FC\ suggests the use of velvet forks\cite{Velvet,\NipoCite}, a recently introduced mechanism for conflict free deployment of blockchain consensus upgrades -- yet the impact on the security of the light client protocol remains unclear.
    
    In this work, we provide a comprehensive analysis of the security of \FC\ under a velvet fork deployment. We discover that velvet forks expose \FC\ to \cs\, a novel type of attack, concurrently observed in similar superlight clients \cite{DionysisVelvet}. Specifically, we show how, an adversary subverting only a small fraction of the hash rate or consensus participants, can not only execute double-spending attacks against velvet \FC\ nodes, but also print fake coins -- with high probability of success.
    We then present a mitigation to this attack and prove its security both under velvet and, more traditional, soft and hard fork deployment. Finally, we implement this mitigation in the cross-chain setting: we design and deploy a Bitcoin \FC\ as a smart contract on Ethereum, improving upon the existing BTC-Relay \cite{BTCRelay}.
  \end{abstract}

  \cleardoublepage
  
  \fancyhead[RE,LO]{\sffamily {Table of Contents}}
  \tableofcontents 

  \clearpage{\pagestyle{empty}\cleardoublepage}
  \pagenumbering{arabic}
  \setcounter{page}{1}
  \fancyhead[LE,RO]{\slshape \rightmark}
  \fancyhead[LO,RE]{\slshape \leftmark}
  
  \chapter{Introduction}
    \input{Introduction}
  \chapter{Background}
    \input{Background}
  \chapter{\CS\ attacks on \FC}
    \input{Chainsewing.tex}
  \chapter[Probability of success]{Analysis of the \cs\ attack on \FC}
    \label{chapter:probability}
    \input{Probability}
  \chapter{Mitigating the \cs\ attack on \FC}
    \input{Mitigating}
  \chapter{Implementation and Evaluation of \FC\ as a chain-relay}
    \input{ImplementationEvaluation}
  \chapter{Discussion}
    \input{Discussion}
  \chapter{Conclusion and Future Work}
    \input{Conclusion}
  \chapter{Acknowledgements}
    \input{Acknowledgements}
  \printbibliography
  \appendix
  \chapter{Additional figures for the analysis of the \cs\ attack on \FC}
    \input{appendix-figures}
\end{document}
